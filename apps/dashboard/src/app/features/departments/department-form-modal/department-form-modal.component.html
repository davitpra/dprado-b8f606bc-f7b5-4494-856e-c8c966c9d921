<div class="fixed inset-0 bg-black/50 flex items-center justify-center z-[100]" (click)="onClose()">
  <div class="bg-white dark:bg-gray-800 rounded-lg p-6 w-full max-w-[480px]" (click)="$event.stopPropagation()">
    <div class="flex justify-between items-center mb-5">
      <h2 class="m-0 text-lg text-gray-900 dark:text-gray-100">{{ editDept() ? 'Edit Department' : 'New Department' }}</h2>
      <button class="bg-transparent border-none text-base cursor-pointer text-gray-500 dark:text-gray-400" (click)="onClose()" aria-label="Close">&#10005;</button>
    </div>

    @if (departmentStore.error()) {
      <div class="bg-red-50 dark:bg-red-900/20 text-red-600 dark:text-red-400 px-3 py-2 rounded-md text-sm mb-4">
        {{ departmentStore.error() }}
      </div>
    }

    <form [formGroup]="form" (ngSubmit)="onSubmit()">
      <div class="flex flex-col mb-4">
        <label for="dept-name" class="text-sm font-medium mb-1 text-gray-700 dark:text-gray-300">Name *</label>
        <input id="dept-name" type="text" formControlName="name" placeholder="Department name"
          class="px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md text-sm bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100 focus:outline-none focus:border-blue-500" />
      </div>
      <div class="flex flex-col mb-4">
        <label for="dept-desc" class="text-sm font-medium mb-1 text-gray-700 dark:text-gray-300">Description</label>
        <textarea
          id="dept-desc"
          formControlName="description"
          rows="3"
          placeholder="Optional description"
          class="px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md text-sm bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100 resize-y focus:outline-none focus:border-blue-500"
        ></textarea>
      </div>
      <div class="flex justify-end gap-3 mt-6">
        <button type="button"
          class="px-4 py-2 bg-gray-100 dark:bg-gray-700 border border-gray-300 dark:border-gray-600 rounded-md cursor-pointer text-gray-700 dark:text-gray-300"
          (click)="onClose()">Cancel</button>
        <button type="submit"
          class="px-4 py-2 bg-blue-500 text-white border-none rounded-md cursor-pointer font-medium disabled:opacity-60 disabled:cursor-not-allowed"
          [disabled]="form.invalid || departmentStore.isLoading()">
          {{ editDept() ? 'Save Changes' : 'Create' }}
        </button>
      </div>
    </form>
  </div>
</div>

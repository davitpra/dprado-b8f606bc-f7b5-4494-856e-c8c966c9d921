<div class="hidden md:grid md:grid-cols-3 gap-4 items-start">
  @for (col of columns; track col.status) {
    <div class="bg-gray-100 dark:bg-gray-800/50 rounded-lg p-3">
      <div class="flex justify-between items-center mb-3">
        <span class="font-semibold text-sm text-gray-700 dark:text-gray-200">{{ col.label }}</span>
        <span class="bg-white dark:bg-gray-700 rounded-full px-2 py-0.5 text-xs text-gray-500 dark:text-gray-400 font-medium">
          {{ taskStore.tasksByStatus()[col.status].length }}
        </span>
      </div>
      <div
        cdkDropList
        [id]="col.status"
        [cdkDropListData]="taskStore.tasksByStatus()[col.status]"
        [cdkDropListConnectedTo]="connectedLists"
        (cdkDropListDropped)="onDrop($event)"
        class="min-h-[80px]"
      >
        @for (task of taskStore.tasksByStatus()[col.status]; track task.id) {
          <div cdkDrag [cdkDragData]="task" [cdkDragDisabled]="!canDragTask(task)">
            <app-task-card [task]="task" (edit)="editTask.emit($event)" (delete)="deleteTask.emit($event)" />
            <div *cdkDragPlaceholder class="bg-indigo-100 dark:bg-indigo-900/30 border-2 border-dashed border-indigo-400 rounded-lg h-[60px] mb-2"></div>
          </div>
        }
      </div>
    </div>
  }
</div>
